import{_ as s,c as i,o as a,a3 as t}from"./chunks/framework.D5qxx6u8.js";const g=JSON.parse('{"title":"Dispatch","description":"","frontmatter":{},"headers":[],"relativePath":"dispatch.md","filePath":"dispatch.md","lastUpdated":1717792017000}'),e={name:"dispatch.md"},n=t(`<h1 id="dispatch" tabindex="-1">Dispatch <a class="header-anchor" href="#dispatch" aria-label="Permalink to &quot;Dispatch&quot;">​</a></h1><p>The <code>initRelay</code> function returns a promise that resolves with a <code>Dispatch</code> object. This object can be used to interact with the relay system.</p><p><code>Dispatch</code> provides methods for sending commands from the character sheet back to the host. Except when specified, all of these methods below will return a promise.</p><h2 id="update" tabindex="-1"><code>update</code> <a class="header-anchor" href="#update" aria-label="Permalink to &quot;\`update\`&quot;">​</a></h2><p>The <code>update</code> method sends character changes to the host page (VTT) to persist in the data store (Firebase).</p><p>The partial character passed in here must contain the <code>characterId</code> and can contain any combination of the <code>attributes</code>, <code>bio</code>, and <code>gmNotes</code> properties.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">update</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options: { overwrite?: boolean },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> character: Partial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Character</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span></code></pre></div><p>When updating a character’s attributes, only include those attributes that have changed.</p><h2 id="updatecharacter" tabindex="-1"><code>updateCharacter</code> <a class="header-anchor" href="#updatecharacter" aria-label="Permalink to &quot;\`updateCharacter\`&quot;">​</a></h2><p>Like <code>update</code>, <code>updateCharacter</code> sends character changes to the host page (VTT) to persist in the data store (Firebase).</p><p>However, this function takes a full set of character attributes as the <code>character</code> argument and automatically computes the diff with existing character attributes so that only changed attributes are sent to the data store.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateCharacter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> character: Partial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Character</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span></code></pre></div><h2 id="updatesharedsettings" tabindex="-1"><code>updateSharedSettings</code> <a class="header-anchor" href="#updatesharedsettings" aria-label="Permalink to &quot;\`updateSharedSettings\`&quot;">​</a></h2><p>Updates sheet settings that are shared across all people in the game. Returns a promise that can be awaited.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateSharedSettings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> update: { settings: { [key: string]: any } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span></span></code></pre></div><h2 id="roll" tabindex="-1"><code>roll</code> <a class="header-anchor" href="#roll" aria-label="Permalink to &quot;\`roll\`&quot;">​</a></h2><p>The <code>roll</code> method takes one or more <code>rolls</code> in the form of an object, where the keys are unique roll names and the values are roll strings.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">roll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rolls: { [rollName: string]: string } </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Ex. {attack: &#39;1d20+4&#39;, damage: \`3d6+2\`}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  messageId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">messageId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: string, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">results</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: RollResults }</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>The <code>messageId</code> property can be provided to attach the roll to an existing chat message. If the <code>messageId</code> property is omitted, the roll will be associated with a new chat message, and a new <code>messageId</code> will be returned with the roll results.</p><p>The function returns a promise that resolves with an object containing the <code>messageId</code> and the <code>RollResult</code>. The roll result is returned in the same format as in the legacy computed roll system.</p><p>For more information on data types, see the Types page.</p><h2 id="post" tabindex="-1"><code>post</code> <a class="header-anchor" href="#post" aria-label="Permalink to &quot;\`post\`&quot;">​</a></h2><p>This function posts a message to chat, either creating a new message or overwriting an existing one. It requires a <code>characterId</code> and message content, a string containing either plain text or HTML to be posted.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> messageId?: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> content: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> options?: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> whisper?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;gm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> secret?: boolean,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p>The function also accepts an options object. Currently, only <code>whisper</code> and <code>secret</code> are supported. The only valid value for <code>whisper</code> is <code>gm</code>, which will send the message as a whisper to the GM.</p><p>The <code>secret</code> option is ignored unless <code>whisper</code> is also set; toggling to true will cause the message to not be visible to the controlling player.</p><p>Like <code>roll</code>, <code>messageId</code> can be provided to update an existing chat message, but if omitted, the function will generate a new <code>messageId</code> and post a new chat message. The function returns the <code>messageId</code>.</p><h2 id="query" tabindex="-1"><code>query</code> <a class="header-anchor" href="#query" aria-label="Permalink to &quot;\`query\`&quot;">​</a></h2><p>The <code>query</code> function takes an <code>options</code> object and uses it to display a <code>SweetAlert</code> prompt to the user.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(options: Swal2Options): {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isConfirmed: boolean,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isDenied: boolean,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> isDismissed: boolean,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value?: string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dismiss?: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cancel&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;backdrop&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;close&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;esc&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;timer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errors?: string[],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> results</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> isConfirmed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> isDenied</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> isDismissed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> dismiss</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> errors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}&gt;</span></span></code></pre></div><p>It returns the results of the query as a <code>SweetAlertResult</code>, along with any errors encountered. The options work exactly as described in the <a href="https://sweetalert.js.org/docs/" target="_blank" rel="noreferrer">SweetAlert2 documentation</a>.</p><p>However, not all options are allowed. Here is a list of the allowed options:</p><table tabindex="0"><thead><tr><th>Allowed Options</th><th>Description</th></tr></thead><tbody><tr><td>ariaLabel</td><td>Custom aria-label for the input field.</td></tr><tr><td>background</td><td>Background color for the modal.</td></tr><tr><td>cancelButtonAriaLabel</td><td>Custom aria-label for the cancel button.</td></tr><tr><td>cancelButtonColor</td><td>Background color for the cancel button.</td></tr><tr><td>cancelButtonText</td><td>Text for the cancel button.</td></tr><tr><td>closeButtonAriaLabel</td><td>Custom aria-label for the close button.</td></tr><tr><td>confirmButtonAriaLabel</td><td>Custom aria-label for the confirm button.</td></tr><tr><td>confirmButtonColor</td><td>Background color for the confirm button.</td></tr><tr><td>confirmButtonText</td><td>Text for the confirm button.</td></tr><tr><td>currentProgressStep</td><td>Current progress step index.</td></tr><tr><td>denyButtonAriaLabel</td><td>Custom aria-label for the deny button.</td></tr><tr><td>denyButtonColor</td><td>Background color for the deny button.</td></tr><tr><td>denyButtonText</td><td>Text for the deny button.</td></tr><tr><td>grow</td><td>Grow animation for the modal (&#39;row&#39;, &#39;column&#39;, &#39;fullscreen&#39;).</td></tr><tr><td>iconColor</td><td>Color of the modal icon.</td></tr><tr><td>imageAlt</td><td>Alternate text for the image.</td></tr><tr><td>imageHeight</td><td>Height of the image.</td></tr><tr><td>imageUrl</td><td>URL of the image to display.</td></tr><tr><td>imageWidth</td><td>Width of the image.</td></tr><tr><td>input</td><td>Input field type (&#39;text&#39;, &#39;email&#39;, &#39;password&#39;, etc.).</td></tr><tr><td>inputAttributes</td><td>Custom attributes for the input field.</td></tr><tr><td>inputAutoTrim</td><td>Automatically trim the input value.</td></tr><tr><td>inputLabel</td><td>Label for the input field.</td></tr><tr><td>inputOptions</td><td>Options for select inputs.</td></tr><tr><td>inputPlaceholder</td><td>Placeholder for the input field.</td></tr><tr><td>inputValue</td><td>Initial value for the input field.</td></tr><tr><td>padding</td><td>Modal window padding.</td></tr><tr><td>position</td><td>Position of the modal (&#39;top&#39;, &#39;center&#39;, &#39;bottom&#39;).</td></tr><tr><td>progressSteps</td><td>Progress steps, useful for multi-step forms.</td></tr><tr><td>progressStepsDistance</td><td>Distance between progress steps.</td></tr><tr><td>returnInputValueOnDeny</td><td>Return input value when denied.</td></tr><tr><td>reverseButtons</td><td>Reverse the order of buttons.</td></tr><tr><td>showCancelButton</td><td>Show the cancel button.</td></tr><tr><td>showCloseButton</td><td>Show the close button.</td></tr><tr><td>showConfirmButton</td><td>Show the confirm button.</td></tr><tr><td>showDenyButton</td><td>Show the deny button.</td></tr><tr><td>text</td><td>Text content for the modal.</td></tr><tr><td>timer</td><td>Auto close timer for the modal.</td></tr><tr><td>timerProgressBar</td><td>Show a progress bar for the timer.</td></tr><tr><td>titleText</td><td>Title for the modal.</td></tr><tr><td>validationMessage</td><td>Message for input validation.</td></tr><tr><td>width</td><td>Width of the modal.</td></tr></tbody></table><h2 id="perform" tabindex="-1"><code>perform</code> <a class="header-anchor" href="#perform" aria-label="Permalink to &quot;\`perform\`&quot;">​</a></h2><p>The <code>perform</code> method executes the specified action on behalf of the character (designated by <code>characterId</code>), passing in <code>args</code> to the action method. This method can perform actions on behalf of any character, even a character for which the sheet does not have data.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">perform</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> action: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: string[],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="getcomputed" tabindex="-1"><code>getComputed</code> <a class="header-anchor" href="#getcomputed" aria-label="Permalink to &quot;\`getComputed\`&quot;">​</a></h2><p>The <code>getComputed</code> function is used to retrieve the value of a computed property.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComputed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> property: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: string[],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>It takes the following arguments:</p><ul><li><code>characterId</code>: The ID of the character whose computed property you want to get.</li><li><code>property</code>: The name of the computed property to retrieve.</li><li><code>args</code>: An array of string arguments that may be required by the computed property.</li></ul><p>This method returns a promise that resolves with the computed value, which can be a string, number, or object.</p><h2 id="setcomputed" tabindex="-1"><code>setComputed</code> <a class="header-anchor" href="#setcomputed" aria-label="Permalink to &quot;\`setComputed\`&quot;">​</a></h2><p>The <code>setComputed</code> function is used to set the value of a computed property.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setComputed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> property: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: string[],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>It takes the following arguments:</p><ul><li><code>characterId</code>: The ID of the character whose computed property you want to set.</li><li><code>property</code>: The name of the computed property to set.</li><li><code>args</code>: An array of string arguments that may be required by the computed property.</li></ul><p>This method returns a promise that resolves with the new computed value, which can be a string, number, or object.</p><h2 id="compendiumrequest" tabindex="-1"><code>compendiumRequest</code> <a class="header-anchor" href="#compendiumrequest" aria-label="Permalink to &quot;\`compendiumRequest\`&quot;">​</a></h2><p><code>compendiumRequest</code> executes an AJAX request to the compendium service’s graphQL endpoint. It takes in a graphQL query string written according to the Compendium service’s schema. The query string does not need to include the ruleSystem shortName as this is set automatically according to the campaign override or <code>sheet.json</code> value in the VTT.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">compendiumRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> errors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> extensions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}&gt;;</span></span></code></pre></div><h2 id="debouncedcompendiumrequest" tabindex="-1"><code>debouncedCompendiumRequest</code> <a class="header-anchor" href="#debouncedcompendiumrequest" aria-label="Permalink to &quot;\`debouncedCompendiumRequest\`&quot;">​</a></h2><p><code>debouncedCompendiumRequest</code> works just like the <code>compendiumRequest</code> method, with the exception that calls to this function are automatically debounced (at 100ms) and grouped into a single request to the compendium service.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debouncedCompendiumRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> query: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Object</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}&gt;;</span></span></code></pre></div><p><strong>NOTE</strong>: This function will only return the requested data; it does not return errors or extensions.</p><h2 id="gettokens" tabindex="-1"><code>getTokens</code> <a class="header-anchor" href="#gettokens" aria-label="Permalink to &quot;\`getTokens\`&quot;">​</a></h2><p><code>getTokens</code> requires a character ID string and returns information about tokens on the user’s current page. The return value contains two arrays of tokens.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTokens</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> selected</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> tokens</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}&gt;;</span></span></code></pre></div><p>The <code>tokens</code> array contains all tokens on the current page representing the character whose ID was provided to the function. The <code>selected</code> array contains any tokens that are currently selected, regardless of which character they represent.</p><p>The returned token objects contain all of the token attributes available to the API. You can find the documentation <a href="https://roll20.net" target="_blank" rel="noreferrer">here</a>.</p><h2 id="addtotracker" tabindex="-1"><code>addToTracker</code> <a class="header-anchor" href="#addtotracker" aria-label="Permalink to &quot;\`addToTracker\`&quot;">​</a></h2><p>The <code>addToTracker</code> method adds or updates a single item in the turn tracker. Passing in a <code>tokenId</code> will add the specified token to the tracker, while passing in <code>custom</code> with a name and an optional image URL (<code>img</code>) will add a custom item, not connected to any character or token.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addToTracker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenId?: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> custom?: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> img?: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> formula?: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value: string </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> number</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>A round calculation string can be added via the optional <code>formula</code> parameter. <code>value</code> is the initiative number for the item.</p><h2 id="addactionstohost" tabindex="-1"><code>addActionsToHost</code> <a class="header-anchor" href="#addactionstohost" aria-label="Permalink to &quot;\`addActionsToHost\`&quot;">​</a></h2><p>The <code>addActionsToHost</code> method adds a specific action (macro) to an area of the VTT UI, either the macrobar or the token action bar. Either <code>sheetAction</code> or <code>action</code> can be passed in, but not both simultaneously.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addActionsToHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sheetAction?: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> action: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args?: string[]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> action?: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> locations?: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;macroBar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tokenActionBar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;macroBar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tokenActionBar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> actionId?: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requestId?: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>The <code>sheetAction</code> arg should be passed in when the action is designated to a character. The <code>action</code> arg should be passed when the action is more generic.</p><h2 id="getactions" tabindex="-1"><code>getActions</code> <a class="header-anchor" href="#getactions" aria-label="Permalink to &quot;\`getActions\`&quot;">​</a></h2><p><code>getActions</code> retrieves a specific character’s actions (macros).</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getActions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId?: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> actions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { [</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ActionFromHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}&gt;;</span></span></code></pre></div><h2 id="setcontainersize" tabindex="-1"><code>setContainerSize</code> <a class="header-anchor" href="#setcontainersize" aria-label="Permalink to &quot;\`setContainerSize\`&quot;">​</a></h2><p>This method updates the size of the container which holds the sheet shared settings. It also returns a promise that can be awaited.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setContainerSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> width?: number,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> height?: number </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>This can be used in conjunction with something like the <code>ResizeSensor</code> event listener from <a href="https://www.npmjs.com/package/css-element-queries" target="_blank" rel="noreferrer">npm: css-element-queries</a> to resize the container on the host automatically.</p><h2 id="updatetokensbycharacter" tabindex="-1"><code>updateTokensByCharacter</code> <a class="header-anchor" href="#updatetokensbycharacter" aria-label="Permalink to &quot;\`updateTokensByCharacter\`&quot;">​</a></h2><p>The <code>updateTokensByCharacter</code> method updates a particular character’s default token as well as all existing tokens representing that character.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateTokensByCharacter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> characterId: string,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token: Partial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>This method returns a promise that can be awaited.</p><h2 id="updatetokensbyids" tabindex="-1"><code>updateTokensByIds</code> <a class="header-anchor" href="#updatetokensbyids" aria-label="Permalink to &quot;\`updateTokensByIds\`&quot;">​</a></h2><p>The <code>updateTokensByIds</code> method updates a single or several tokens. It also returns a promise that can be awaited.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateTokensByIds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tokenIds: array </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ids </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> strings</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> token: Partial</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Token</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;void&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h2 id="autolinktext" tabindex="-1"><code>autoLinkText</code> <a class="header-anchor" href="#autolinktext" aria-label="Permalink to &quot;\`autoLinkText\`&quot;">​</a></h2><p><code>autoLinkText</code> goes through the text to find handout names between square brackets and converts them into links with the handoutID.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">autoLinkText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>For example, in a game with a handout named Dragon, passing in the text &quot;this is a [Dragon]&quot; to the <code>autoLinkText</code> method returns something similar to:</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;this is a \`&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> href</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://journal.roll20.net/8je02j0kd02k&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Dragon&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;\`&quot;</span></span></code></pre></div><h2 id="opendialogfromlink" tabindex="-1"><code>openDialogFromLink</code> <a class="header-anchor" href="#opendialogfromlink" aria-label="Permalink to &quot;\`openDialogFromLink\`&quot;">​</a></h2><p><code>openDialogFromLink</code> opens the supplied <code>urlString</code> through the VTT.</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dispatch.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openDialogFromLink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> args: { </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> urlString: string</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}): </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">void</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p><strong>NOTE</strong>:</p><ul><li>If the URL is for a <strong>handout</strong>, the corresponding handout will be opened in the campaign. This will also check if the user opening the link has access to the handout.</li><li>If the URL is for a <strong>compendium</strong>, it will open a pop-up to the compendium page. It will also check to ensure the user has access to view the page.</li><li>If the URL is for an <strong>external</strong> page, a confirmation pop-up will display to warn the user that the link is for an external site, and a new tab will open in their main window if confirmed.</li></ul>`,92),h=[n];function l(p,r,d,o,k,c){return a(),i("div",null,h)}const u=s(e,[["render",l]]);export{g as __pageData,u as default};
